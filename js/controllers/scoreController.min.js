"use strict";define(["jquery","app"],function(a,b){b.controller("scoreController",["$window","$scope","$location","webSocketService","applicationService","messageBoxService",function(d,q,k,h,g,m){if(h.webSocket==null){k.url("");return false}if(a(".container").parent().height()<g.getMbHeight()){a(".container").parent().css("height","100%")}g.checkBrowers();var i=localStorage.pageType;var c=g.getMbWidth();var l=g.getMbHeight();a(".score").css({height:l*0.75});a(".w-view-160").css({height:c/12});a(".img_score").css({width:c/15,height:c/15});a(".title-font").css({"font-size":"10px",color:"#c6c6c6"});switch(parseInt(i)){case 3:a("#div_total_score,#div_score_detail").hide();if(a(".container").parent().height()<g.getMbHeight()){a(".container").parent().css("height","100%")}a(".score").css({height:a("#div_press").height()+a("#div_press_chart").height()+a("#div_breath").height()+a("#div_breath_chart").height()+10+3});break;case 1:case 2:case 4:if(a(".container").parent().height()<g.getMbHeight()){a(".container").parent().css("height","100%")}a(".score").css({height:a("#div_score_detail").height()+a("#div_total_score").height()+a("#div_press").height()+a("#div_press_chart").height()+a("#div_breath").height()+a("#div_breath_chart").height()+10+3});break}var p={};q.totalScore=0;switch(parseInt(i)){case 4:a("#btn_exit,#btn_home").hide();var j=g.getExamIndex();var f=g.getUser().scoreList;p=f[j];q.totalScore=p.totalScore;break;case 2:case 3:a("#btn_back,#span_back").hide();if(a(".container").parent().height()<g.getMbHeight()){a(".container").parent().css("height","100%")}p=g.getScoreInfo();break;default:a("#btn_back,#span_back,#btn_home").hide();if(a(".container").parent().height()<g.getMbHeight()){a(".container").parent().css("height","100%")}p=g.getScoreInfo();break}q.safeScore=parseInt(p.safeScore);q.knowScore=parseInt(p.knowScore);q.pulseScore=parseInt(p.pulseScore);q.helpScore=parseInt(p.helpScore);q.pressScore=parseInt(p.pressScore);q.toothScore=parseInt(p.toothScore);q.airwayScore=parseInt(p.airwayScore);q.breathScore=parseInt(p.breathScore);q.assessScore=parseInt(p.assessScore);q.placeScore=parseInt(p.placeScore);q.pressPoseScore=parseInt(p.pressPoseScore);q.careScore=parseInt(p.careScore);q.ccScore=parseInt(p.ccScore);q.timeScore=parseInt(p.timeScore);q.pressBackTrueRate=parseInt(p.pressBackTrueRate);q.pressDeepTrueRate=parseInt(p.pressDeepTrueRate);q.pressTrueRate=parseInt(p.pressTrueRate);q.pressSpeedTrueRate=parseInt(p.pressSpeedTrueRate);q.breathTrueRate=parseInt(p.breathTrueRate);if(i!=4){q.totalScore=q.safeScore+q.knowScore+q.pulseScore+q.helpScore+q.pressScore+q.toothScore+q.airwayScore+q.breathScore+q.assessScore+q.placeScore+q.pressPoseScore+q.careScore+q.ccScore+q.timeScore}a("#div_datail_press_true").html("");a("#div_datail_press_rate").html("");a("#div_datail_breath_true").html("");o(q.pressTrueRate);e(q.pressSpeedTrueRate);n(q.breathTrueRate);d.onunload=function(r){try{g.exit()}catch(r){m.warning(r.message);return false}return false};function o(r){drawProcess("#canvas_press_rate",r)}function n(r){drawProcess("#canvas_breath_rate",r)}function e(r){drawHalfProcess("#canvas_speed_rate",r)}q.redirectExamList=function(){k.url("exam_list");return false};q.redirectMain=function(){if(g.getKickStatus()){g.setUser(null)}g.setPageType(0);k.url("/");return false};q.exit=function(){try{m.confirm("确认退出?",function(s){if(s){g.logout(function(u,t){h.webSocket.close();h.webSocket=null;k.url("/")})}})}catch(r){m.warning(r.message);return false}}}])});